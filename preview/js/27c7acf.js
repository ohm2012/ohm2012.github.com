window.log=function f(){log.history=log.history||[];log.history.push(arguments);if(this.console){var i=arguments;try{i.callee=f.caller}catch(j){}i=[].slice.call(i);typeof console.log==="object"?log.apply.call(console.log,console,i):console.log.apply(console,i)}};
(function(a){function i(){}var j,n;for(j="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");n=j.pop();)a[n]=a[n]||i})(function(){try{return console.log(),window.console}catch(a){return window.console={}}}());
(function(a,i,j,n){var q=a(n),r=function(a,d){a.element.trigger("waypoint.reached",d);if(a.options.triggerOnce)a.element[i]("destroy")},k=function(a,d){if(!d)return-1;for(var b=d.waypoints.length-1;b>=0&&d.waypoints[b].element[0]!==a[0];)b-=1;return b},o=[],m=function(g){a.extend(this,{element:a(g),oldScroll:0,waypoints:[],didScroll:!1,didResize:!1,doScroll:a.proxy(function(){var d=this.element.scrollTop(),b=d>this.oldScroll,e=this,c=a.grep(this.waypoints,function(a){return b?a.offset>e.oldScroll&&
a.offset<=d:a.offset<=e.oldScroll&&a.offset>d}),p=c.length;if(!this.oldScroll||!d)a[j]("refresh");this.oldScroll=d;p&&(b||c.reverse(),a.each(c,function(a,e){if(e.options.continuous||a===p-1)r(e,[b?"down":"up"])}))},this)});a(g).bind("scroll.waypoints",a.proxy(function(){if(!this.didScroll)this.didScroll=!0,n.setTimeout(a.proxy(function(){this.doScroll();this.didScroll=!1},this),a[j].settings.scrollThrottle)},this)).bind("resize.waypoints",a.proxy(function(){if(!this.didResize)this.didResize=!0,n.setTimeout(a.proxy(function(){a[j]("refresh");
this.didResize=!1},this),a[j].settings.resizeThrottle)},this));q.load(a.proxy(function(){this.doScroll()},this))},t=function(g){var d=null;a.each(o,function(b,a){if(a.element[0]===g)return d=a,!1});return d},l={init:function(g,d){this.each(function(){var b=a.fn[i].defaults.context,e,c=a(this);if(d&&d.context)b=d.context;a.isWindow(b)||(b=c.closest(b)[0]);e=t(b);e||(e=new m(b),o.push(e));var p=k(c,e),s=a.extend({},p<0?a.fn[i].defaults:e.waypoints[p].options,d);s.offset=s.offset==="bottom-in-view"?
function(){return(a.isWindow(b)?a[j]("viewportHeight"):a(b).height())-a(this).outerHeight()}:s.offset;p<0?e.waypoints.push({element:c,offset:null,options:s}):e.waypoints[p].options=s;g&&c.bind("waypoint.reached",g);d&&d.handler&&c.bind("waypoint.reached",d.handler)});a[j]("refresh");return this},remove:function(){return this.each(function(g,d){var b=a(d);a.each(o,function(a,c){var d=k(b,c);d>=0&&(c.waypoints.splice(d,1),c.waypoints.length||(c.element.unbind("scroll.waypoints resize.waypoints"),o.splice(a,
1)))})})},destroy:function(){return this.unbind("waypoint.reached")[i]("remove")}},h={refresh:function(){a.each(o,function(g,d){var b=a.isWindow(d.element[0]),e=b?0:d.element.offset().top,c=b?a[j]("viewportHeight"):d.element.height(),p=b?0:d.element.scrollTop();a.each(d.waypoints,function(b,a){if(a){var g=a.options.offset,h=a.offset;typeof a.options.offset==="function"?g=a.options.offset.apply(a.element):typeof a.options.offset==="string"&&(g=parseFloat(a.options.offset),g=a.options.offset.indexOf("%")?
Math.ceil(c*(g/100)):g);a.offset=a.element.offset().top-e+p-g;a.options.onlyOnScroll||(h!==null&&d.oldScroll>h&&d.oldScroll<=a.offset?r(a,["up"]):h!==null&&d.oldScroll<h&&d.oldScroll>=a.offset?r(a,["down"]):!h&&d.element.scrollTop()>a.offset&&r(a,["down"]))}});d.waypoints.sort(function(b,a){return b.offset-a.offset})})},viewportHeight:function(){return n.innerHeight?n.innerHeight:q.height()},aggregate:function(){var g=a();a.each(o,function(d,b){a.each(b.waypoints,function(b,a){g=g.add(a.element)})});
return g}};a.fn[i]=function(g){if(l[g])return l[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="function"||!g)return l.init.apply(this,arguments);else if(typeof g==="object")return l.init.apply(this,[null,g]);else a.error("Method "+g+" does not exist on jQuery "+i)};a.fn[i].defaults={continuous:!0,offset:0,triggerOnce:!1,context:n};a[j]=function(a){return h[a]?h[a].apply(this):h.aggregate()};a[j].settings={resizeThrottle:200,scrollThrottle:100};q.load(function(){a[j]("refresh")})})(jQuery,
"waypoint","waypoints",window);
(function(a){function i(b){var a=["Moz","Webkit","O","ms"],c=b.charAt(0).toUpperCase()+b.substr(1);if(b in l.style)return b;for(b=0;b<a.length;++b){var d=a[b]+c;if(d in l.style)return d}}function j(b){"string"===typeof b&&this.parse(b);return this}function n(b,a,c){!0===a?b.queue(c):a?b.queue(a,c):c()}function q(b){var e=[];a.each(b,function(b){b=a.camelCase(b);b=a.transit.propertyMap[b]||b;b=o(b);-1===a.inArray(b,e)&&e.push(b)});return e}function r(b,e,c,d){b=q(b);a.cssEase[c]&&(c=a.cssEase[c]);
var h=""+t(e)+" "+c;0<parseInt(d,10)&&(h+=" "+t(d));var g=[];a.each(b,function(b,a){g.push(a+" "+h)});return g.join(", ")}function k(b,e){e||(a.cssNumber[b]=!0);a.transit.propertyMap[b]=h.transform;a.cssHooks[b]={get:function(e){return(a(e).css("transform")||new j).get(b)},set:function(e,d){var h=a(e).css("transform")||new j;h.setFromString(b,d);a(e).css({transform:h})}}}function o(b){return b.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})}function m(b,a){return"string"===typeof b&&!b.match(/^[\-0-9\.]+$/)?
b:""+b+a}function t(b){a.fx.speeds[b]&&(b=a.fx.speeds[b]);return m(b,"ms")}a.transit={version:"0.1.3",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var l=document.createElement("div"),h={},g=-1<navigator.userAgent.toLowerCase().indexOf("chrome");h.transition=i("transition");h.transitionDelay=i("transitionDelay");h.transform=i("transform");
h.transformOrigin=i("transformOrigin");l.style[h.transform]="";l.style[h.transform]="rotateY(90deg)";h.transform3d=""!==l.style[h.transform];a.extend(a.support,h);var d=h.transitionEnd={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[h.transition]||null,l=null;a.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)"};a.cssHooks.transform={get:function(b){return a(b).data("transform")},
set:function(b,e){var c=e;c instanceof j||(c=new j(c));b.style[h.transform]="WebkitTransform"===h.transform&&!g?c.toString(!0):c.toString();a(b).data("transform",c)}};a.cssHooks.transformOrigin={get:function(b){return b.style[h.transformOrigin]},set:function(b,a){b.style[h.transformOrigin]=a}};k("scale");k("translate");k("rotate");k("rotateX");k("rotateY");k("rotate3d");k("perspective");k("skewX");k("skewY");k("x",!0);k("y",!0);j.prototype={setFromString:function(b,a){var c="string"===typeof a?a.split(","):
a.constructor===Array?a:[a];c.unshift(b);j.prototype.set.apply(this,c)},set:function(b){var a=Array.prototype.slice.apply(arguments,[1]);this.setter[b]?this.setter[b].apply(this,a):this[b]=a.join(",")},get:function(b){return this.getter[b]?this.getter[b].apply(this):this[b]||0},setter:{rotate:function(b){this.rotate=m(b,"deg")},rotateX:function(b){this.rotateX=m(b,"deg")},rotateY:function(b){this.rotateY=m(b,"deg")},scale:function(b,a){void 0===a&&(a=b);this.scale=b+","+a},skewX:function(b){this.skewX=
m(b,"deg")},skewY:function(b){this.skewY=m(b,"deg")},perspective:function(b){this.perspective=m(b,"px")},x:function(b){this.set("translate",b,null)},y:function(b){this.set("translate",null,b)},translate:function(b,a){void 0===this._translateX&&(this._translateX=0);void 0===this._translateY&&(this._translateY=0);null!==b&&(this._translateX=m(b,"px"));null!==a&&(this._translateY=m(a,"px"));this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||
0},scale:function(){var b=(this.scale||"1,1").split(",");b[0]&&(b[0]=parseFloat(b[0]));b[1]&&(b[1]=parseFloat(b[1]));return b[0]===b[1]?b[0]:b},rotate3d:function(){for(var b=(this.rotate3d||"0,0,0,0deg").split(","),a=0;3>=a;++a)b[a]&&(b[a]=parseFloat(b[a]));b[3]&&(b[3]=m(b[3],"deg"));return b}},parse:function(b){var a=this;b.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(b,d,h){a.setFromString(d,h)})},toString:function(a){var d=[],c;for(c in this)if(this.hasOwnProperty(c)&&(h.transform3d||!("rotateX"===
c||"rotateY"===c||"perspective"===c||"transformOrigin"===c)))"_"!==c[0]&&(a&&"scale"===c?d.push(c+"3d("+this[c]+",1)"):a&&"translate"===c?d.push(c+"3d("+this[c]+",0)"):d.push(c+"("+this[c]+")"));return d.join(" ")}};a.fn.transition=a.fn.transit=function(b,e,c,g){var i=this,j=0,k=!0;"function"===typeof e&&(g=e,e=void 0);"function"===typeof c&&(g=c,c=void 0);"undefined"!==typeof b.easing&&(c=b.easing,delete b.easing);"undefined"!==typeof b.duration&&(e=b.duration,delete b.duration);"undefined"!==typeof b.complete&&
(g=b.complete,delete b.complete);"undefined"!==typeof b.queue&&(k=b.queue,delete b.queue);"undefined"!==typeof b.delay&&(j=b.delay,delete b.delay);"undefined"===typeof e&&(e=a.fx.speeds._default);"undefined"===typeof c&&(c=a.cssEase._default);var e=t(e),m=r(b,e,c,j),l=a.transit.enabled&&h.transition?parseInt(e,10)+parseInt(j,10):0;if(0===l)return n(i,k,function(a){i.css(b);g&&g();a()}),i;var o={},q=function(c){var e=!1,j=function(){e&&i.unbind(d,j);0<l&&i.each(function(){this.style[h.transition]=
o[this]||null});"function"===typeof g&&g.apply(i);"function"===typeof c&&c()};0<l&&d&&a.transit.useTransitionEnd?(e=!0,i.bind(d,j)):window.setTimeout(j,l);i.each(function(){0<l&&(this.style[h.transition]=m);a(this).css(b)})};n(i,k,function(a){var b=0;"MozTransition"===h.transition&&25>b&&(b=25);window.setTimeout(function(){q(a)},b)});return this};a.transit.getTransitionValue=r})(jQuery);
(function(a){a.fn.disableTextSelect=function(){return this.each(function(){a.browser.mozilla?a(this).css("MozUserSelect","none"):a.browser.msie?a(this).bind("selectstart",function(){return!1}):a(this).mousedown(function(){return!1})})};a(function(a){a(".noSelect").disableTextSelect()})})(jQuery);
var students=[];$("#container").find(".student").each(function(){var a={};a.index=$(this).attr("data-index");a.name=$(this).attr("data-name");a.title=$(this).attr("data-title");a.portraitUrl=$(this).find(".portrait").attr("src");a.slides=[];a.active=!1;$(this).find(".sl").each(function(){a.slides.push($(this))});a.numSlides=a.slides.length;students.push(a)}).remove();
var gallery={parent:$("#absolventen"),elem:null,$slidewrapper:null,sliding:0,isOpen:!1,numSlides:0,slidePos:0,slideWidth:0,$activeSlide:null,activeStudentIndex:0,getStudentBySlide:function(a){return this.$slidewrapper.children().eq(a).prev(".first").index(".first")},getSlideByStudent:function(a){return this.$slidewrapper.find(".first").eq(a).index()},increaseStudent:function(){studentIndex+=1},init:function(){this.elem=$('<div id="gallery"></div>');this.elem.appendTo(this.parent);this.elem=$("#gallery");
this.$slidewrapper=$('<div id="slide-wrapper"></div>');this.elem.append($('<a class="prev-student" href="#">vorheriger</a><a class="next-student" href="#">n\u00e4chster</a><a class="close" href="#"><span class="visuallyhidden">x</span></a>'));this.$slidewrapper.appendTo(this.elem);for(var a=0,b=students.length;a<b;a++)for(var c=students[a],d=0,f=c.slides.length;d<f;d++){var e=c.slides[d];this.numSlides+=1;var g=e.hasClass("text")?"tablecell":"",h=d===0?"first":null;$(document.createElement("div")).addClass("slide "+
h).attr("id","student"+c.index+"-slide"+d).append($(document.createElement("div")).addClass("slide-inner").addClass(g).append(e.html())).appendTo(this.$slidewrapper)}this.$activeSlide=this.$slidewrapper.children().eq(0);this.$activeSlide.addClass("active-slide");return!0},open:function(a){var b=this;this.elem.stop().css({width:vpW-2*cBorder-gutter}).transition({height:vpH-2*gutter},500,function(){b.elem.addClass("full");$("html,body").stop().animate({scrollTop:b.elem.offset().top-gutter},500,function(){b.elem.transition({opacity:1});
$activeElement=$("#gallery");resize();b.move(a);b.isOpen=!0})})},move:function(a){var b=this;if(b.sliding===0){var c=typeof a;if(c==="string")if(a==="next")b.slidePos+=1;else if(a==="prev")b.slidePos-=1;else if(a==="last")b.slidePos=b.numSlides-1;else if(a==="first")b.slidePos=0;else{if(a!=="next-student"&&a!=="prev student")b.slidePos=0}else if(c==="number")b.slidePos=a;b.sliding=1;b.slidePos>b.numSlides-1?(b.slidePos=b.numSlides-1,$("#slide-wrapper").stop().transition({left:-b.slidePos*b.slideWidth-
100},100,"ease-in-out").transition({left:-b.slidePos*b.slideWidth},100,"ease-in-out",function(){b.sliding=0})):b.slidePos<0?(b.slidePos=0,$("#slide-wrapper").transition({left:-b.slidePos*b.slideWidth+100},100,"ease-in-out").transition({left:-b.slidePos*b.slideWidth},100,"ease-in-out",function(){b.sliding=0})):$("#slide-wrapper").transition({left:-b.slidePos*b.slideWidth},300,"ease-in-out",function(){b.sliding=0})}return!0}};gallery.init();
for(var i=0,j=students.length;i<j;i++){var stu=students[i];$(document.createElement("div")).addClass("item").append($(document.createElement("div")).addClass("item-inner").append($(document.createElement("div")).addClass("front").append($(document.createElement("div")).addClass("student-portrait").append($(document.createElement("img")).attr("src",stu.portraitUrl)))).append($(document.createElement("div")).addClass("back").append($(document.createElement("div")).addClass("student-description").append($(document.createElement("h2")).text(stu.name),
$(document.createElement("h3")).text(stu.title)),$(document.createElement("a")).attr({href:"#student"+stu.index,"data-id":stu.id}).addClass("open").append($(document.createElement("span")).addClass("visuallyhidden").text("open"))))).appendTo("#container")}var vpW=0,vpH=0,cBorder=100,margin=10,gutter=2*margin,$c=$("#container"),$body=$("body"),colnum=6,itemw=0,touch=null,swipe=0,studentId=0;$activeElement=$("#home");var animateTitle=!0;Modernizr.touch&&(touch=!0);$(window).resize(function(){resize()});
function resize(){vpW=$(window).width();vpH=$(window).height();var a=0,a=vpW<321?1:vpW<580?2:vpW<900?3:vpW<1200?4:vpW<1600?5:vpW<1700?6:vpW<2E3?7:vpW<2500?8:9;a!=colnum&&(colnum=a,cBorder=a*a);$("section").css({"min-height":vpH});vpW/vpH>1?$("#parallax").width(vpH-cBorder).height(vpH-cBorder):$("#parallax").width(vpW-cBorder).height(vpW-cBorder);itemw=(vpW-(colnum+1)*gutter-cBorder)/colnum;a=vpW-cBorder-gutter+1;$c.width(a);$(".item").width(itemw).height(itemw*4/3);$full=$(".full");$slides=$full.find(".slide");
$full.width(a).height(vpH-gutter*2);gallery.slideWidth=a;$slides.width(gallery.slideWidth).height(vpH-gutter*2);$(".slide-inner").width(gallery.slideWidth).height(vpH-gutter*2);gallery.$slidewrapper.width(gallery.slideWidth*gallery.numSlides);gallery.$slidewrapper.css({left:-gallery.slidePos*gallery.slideWidth});$("html,body").scrollTop($activeElement.offset().top-gutter);$.waypoints("refresh")}resize();$("#container").on("click",".item",function(){$(".focus").removeClass("focus");$(this).addClass("focus")});
$("#container").on("click",".focus",function(){$(this).removeClass("focus")});$("#container").on("click",".open",function(a){a.stopPropagation();a.preventDefault();a=$(this).attr("href");console.log("studenId: "+a);var b=gallery.$slidewrapper.find(a+"-slide0").index();$activeElement=$target=$("#gallery");gallery.isOpen?$("html,body").stop().animate({scrollTop:$target.offset().top-gutter},500,function(){resize();console.log("gallerie schon offen");gallery.move(b)}):gallery.open(b)});
$("#gallery").on("click",".close",function(a){a.stopPropagation();a.preventDefault();$target=$("#gallery");$target.transition({height:0,opacity:0},500,function(){$("html,body").stop().animate({scrollTop:$("#absolventen").offset().top-gutter},500,function(){$activeElement=$("#absolventen");$target.removeClass("full");resize();gallery.isOpen=!1})})});
$("#nav").find("a[href^='#']").click(function(a){a.preventDefault();$(this);a=$(this.hash);$("html, body").stop().animate({scrollTop:a.offset().top-gutter},500,"swing",function(){})});$("section").waypoint({offset:"50%"});
$("body").on("waypoint.reached","section",function(a,b){var c=$(this);b==="up"&&(c=c.prev());c.length||(c=c.end());$activeElement=c;$(".section-active").removeClass("section-active");c.addClass("section-active");$(".link-active").removeClass("link-active");$("a[href=#"+c.attr("id")+"]").addClass("link-active")});$("#gallery").mousemove(function(a){a.pageX>vpW/2?$(this).css({cursor:"e-resize"}):a.pageX<vpW/2&&$(this).css({cursor:"w-resize"})});
$("#gallery").click(function(a){a.pageX>vpW/2?gallery.move("next"):a.pageX<vpW/2&&gallery.move("prev")});$(".next-student").click(function(a){a.preventDefault();a.stopPropagation();gallery.move("next-student")});$(".prev-student").click(function(a){a.preventDefault();a.stopPropagation();gallery.move("prev-student")});
var layer0={element:$("#layer0"),speed:0.03,startX:64,startY:33,x:0,y:0},layer1={element:$("#layer1"),speed:0.04,startX:40,startY:30,x:0,y:0},layer2={element:$("#layer2"),speed:0.05,startX:30,startY:26,x:0,y:0},layer3={element:$("#layer3"),speed:0.06,startX:29,startY:40,x:0,y:0},layer4={element:$("#layer4"),speed:0.07,startX:38,startY:60,x:0,y:0},layer5={element:$("#layer5"),speed:0.08,startX:60,startY:63,x:0,y:0},layer6={element:$("#layer6"),speed:0.09,startX:40,startY:68,x:0,y:0},layer7={element:$("#layer7"),
speed:0.1,startX:70,startY:45,x:0,y:0},layer8={element:$("#layer8"),speed:0.02,startX:50,startY:27,x:0,y:0},layer9={element:$("#layer9"),speed:0.01,startX:50,startY:50,x:0,y:0},layer10={element:$("#layer10"),speed:0.01,startX:50,startY:88,x:0,y:0},layers=[layer0,layer1,layer2,layer3,layer4,layer5,layer6,layer7,layer8,layer9,layer10],ofY;initLayers();moveLayers();function initLayers(){for(var a=0,b=layers.length;a<b;a++)lay=layers[a],lay.x=lay.startX,lay.y=lay.startY}
function moveLayers(){for(var a=0,b=layers.length;a<b;a++)lay=layers[a],lay.element.css({left:lay.x+"%",top:lay.y+"%"})}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();
$("#title").mouseenter(function(){animateTitle=!0;animate()}).mouseleave(function(){animateTitle=!1;for(var a=0,b=layers.length;a<b;a++)lay=layers[a],lay.x=lay.startX,lay.y=lay.startY,lay.element.stop().animate({left:lay.x+"%",top:lay.y+"%"},500,"swing")});init();animate();function init(){}function animate(){animateTitle&&(requestAnimFrame(animate),draw())}
function draw(){for(var a=(new Date).getTime()*0.0020,b=(1+Math.sin(a))*vpW/2,a=(1+Math.sin(a))*vpH/2,b=-(50-b*100/vpW),a=-(50-a*100/vpH),c=0,d=layers.length;c<d;c++)lay=layers[c],lay.x=lay.startX+lay.speed*b,lay.y=lay.startY+lay.speed*a;moveLayers()};
